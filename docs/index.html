<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>因為有你</title>
    <style>
        /* 背景設定 */
        body { 
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; 
            text-align: center; 
            margin: 0;
            padding: 0;
            /* 填入你的背景圖路徑 */
            background-image: url('images/front.png'); 
            
            /* 讓背景圖覆蓋整個螢幕，不隨捲軸拉伸 */
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            
            /* 確保背景填滿整個手機高度 */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* 增加一個半透明遮罩層，確保文字清晰可讀 */
        .content-overlay {
            background-color: rgba(255, 255, 255, 0.75); /* 白色半透明 */
            padding: 40px 20px;
            border-radius: 20px;
            margin: 20px;
            backdrop-filter: blur(5px); /* 磨砂玻璃效果，若手機支援會很漂亮 */
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            max-width: 85%;
        }

        h1 { font-size: 2.2rem; margin-bottom: 10px; color: #ff6969; }
        p { font-size: 1.1rem; color: #444; margin-bottom: 30px; line-height: 1.6; }
        
        .btn-container { display: flex; flex-direction: column; align-items: center; }
        
        button { 
            padding: 15px 40px; 
            margin: 10px; 
            font-size: 18px; 
            cursor: pointer;
            border: none; 
            border-radius: 50px; 
            background-color: #ffb6c1; 
            color: white;
            transition: transform 0.2s, background-color 0.3s;
            width: 220px;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.4);
        }
        button:hover { background-color: #ff8c94; transform: translateY(-3px); }
    </style>
</head>
<body>

    <div class="content-overlay">
        <h1>因為有你</h1>
        <p>這個世界多了點什麼 ?</p>

        <div class="btn-container">
            <button onclick="goToResult(1)">多一點理解</button>
            <button onclick="goToResult(2)">多一點包容</button>
            <button onclick="goToResult(3)">多一點陪伴</button>
            <button onclick="goToResult(4)">多一點幽默</button>
        </div>
    </div>

    <script>

        // 1. 取得網址參數，判斷是否為重新掃碼
        const urlParams = new URLSearchParams(window.location.search);
        const isNewScan = urlParams.get('from') === 'qrcode';

        // 2. 如果是重新掃碼，清空之前的選擇紀錄
        if (isNewScan) {
            localStorage.removeItem('has_selected');
        }

        // 3. 檢查是否有選擇過
        const savedId = localStorage.getItem('has_selected');
        if (savedId) {
            // 如果有紀錄且不是重新掃碼，直接鎖死在對應的結果頁
            window.location.replace(`r${savedId}.html`);
        }

        // 4. 按鈕點選後的動作
        function goToResult(id) {
            // 永久存入手機瀏覽器 (即使關掉分頁也會在)
            localStorage.setItem('has_selected', id);
            // 使用 replace 取代紀錄，讓「上一頁」按鈕無效化
            window.location.replace(`r${id}.html`);
        }

        //function goToResult(id) {
        //   window.location.href = `result.html?id=${id}`;
        //}

        // 預載入圖片邏輯保持不變
        window.onload = function() {
            setTimeout(function() {
                const imagesToPreload = ["images/1.jpg", "images/2.jpg", "images/3.jpg", "images/4.jpg"];
                imagesToPreload.forEach(function(src) {
                    const img = new Image();
                    img.src = src;
                });
            }, 1000);
        };
    </script>
</body>
</html>